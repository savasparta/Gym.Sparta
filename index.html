<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>GYM SPARTA â€“ OFFLINE MASTER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="apple-touch-icon" href="logo.png.PNG">
<meta name="theme-color" content="#000000">

<style>
:root{
--gold:#d4af37;
--dark:#000;
--card:#111;
--input:#1a1a1a;
--danger:#a00000;
--ok:#0a7a2f;
}

body{
margin:0;
padding:20px;
background:var(--dark);
color:#fff;
font-family:Arial,Helvetica,sans-serif;
text-align:center;
}

h1,h2,h3{color:var(--gold);}
.logo{width:85%;max-width:260px;margin:20px auto;display:block;}

.card{
background:var(--card);
border:2px solid var(--gold);
border-radius:18px;
padding:18px;
margin:18px auto;
max-width:720px;
text-align:left;
}

button{
width:100%;
padding:14px;
margin-top:12px;
background:var(--gold);
color:#000;
border:none;
border-radius:12px;
font-size:17px;
font-weight:bold;
cursor:pointer;
}

button.danger{
background:var(--danger);
color:#fff;
}

input,select,textarea{
width:100%;
padding:14px;
margin-top:10px;
border-radius:12px;
border:2px solid var(--gold);
background:var(--input);
color:#fff;
font-size:16px;
}

.hidden{display:none}

.status-ok{color:#6fff95;font-weight:bold;}
.status-bad{color:#ff6f6f;font-weight:bold;}

.week,.month{
display:grid;
grid-template-columns:repeat(7,1fr);
gap:6px;
margin-top:10px;
}

.day{
border:1px solid var(--gold);
border-radius:8px;
padding:10px;
font-size:12px;
cursor:pointer;
text-align:center;
}

.day.done{
background:var(--gold);
color:#000;
font-weight:bold;
}

.day.today{
outline:2px solid #6fff95;
}

.footer{color:var(--gold);margin:30px 0;font-weight:bold;}
</style>
</head>

<body>

<img src="logo.png.PNG" class="logo">
<h1>ğŸ›ï¸ GYM SPARTA ğŸ›ï¸</h1>

<div class="card hidden" id="accessBox">
<h2>âš”ï¸ Spartan Zugang</h2>
<input id="accessCode" placeholder="Sparta-Code">
<input id="spartaName" placeholder="Spartan Name">
<button onclick="unlock()">Eintreten</button>
</div>

<div class="hidden" id="app">
<h2 id="welcome"></h2>

<div class="card">
<h3>ğŸ›¡ï¸ SYSTEM STATUS</h3>
GerÃ¤t: <span id="deviceStatus" class="status-ok">Gebunden</span><br>
Modus: <span class="status-ok">Offline</span><br>
Letzte Aktion: <span id="lastAction">â€“</span><br>
Aktiver Plan: <span id="activePlan">â€“</span><br>
ErnÃ¤hrung: <span id="activeFood">â€“</span><br>
Letzter Tag aktiv: <span id="lastDay">â€“</span>
</div>

<div class="card">
<strong>ğŸ‘¤ PROFIL</strong><br>
Level: <span id="level">1</span><br>
XP: <span id="xp">0</span><br>
ğŸ”¥ Streak: <span id="streak">0</span>
</div>

<div class="card">
<h3>ğŸ”¥ BEAST MODE â€“ 30 TAGE</h3>
Status: <span id="beastStatus">Nicht aktiv</span><br>
<button onclick="startBeast()">Beast starten</button>
<div id="beastBox" class="hidden">
<label><input type="checkbox" id="bmTrain"> Training</label><br>
<label><input type="checkbox" id="bmFood"> ErnÃ¤hrung</label><br>
<label><input type="checkbox" id="bmSleep"> Schlaf</label><br>
<button onclick="completeBeastDay()">Tag abschlieÃŸen</button>
</div>
</div>

<div class="card">
<h3>ğŸ“… WOCHEN-TRACKER</h3>
<div class="week" id="week"></div>
</div>

<div class="card">
<h3>ğŸ—“ï¸ MONATS-KALENDER</h3>
<div class="month" id="month"></div>
</div>

<div class="card">
<h3>ğŸ“œ XP-CHRONIK</h3>
<div id="xpLog"></div>
</div>

<div class="card">
<h3>ğŸ“¡ SYSTEM LOG</h3>
<div id="systemLog"></div>
</div>

<div class="card">
<h3>ğŸ… ERFOLGE</h3>
<div id="badgesBox"></div>
</div>

<div class="card">
<h3>ğŸ‹ï¸ TRAININGSPLAN</h3>
<select id="planSelect" onchange="savePlan()">
<option value="">â€“ auswÃ¤hlen â€“</option>
<option value="6 Tage ALL-IN">6 Tage ALL-IN</option>
<option value="4 Tage Spartan Split">4 Tage Spartan Split</option>
<option value="3 Tage Spartan Split">3 Tage Spartan Split</option>
</select>
</div>

<div class="card">
<h3>ğŸ¥— ERNÃ„HRUNG</h3>
<select id="foodSelect" onchange="saveFood()">
<option value="">â€“ auswÃ¤hlen â€“</option>
<option value="Masse">Masse</option>
<option value="Lean Bulk">Lean Bulk</option>
<option value="DiÃ¤t">DiÃ¤t</option>
<option value="Hardcore">Hardcore</option>
</select>
</div>

<div class="card">
<h3>ğŸ““ LOGBUCH</h3>
<textarea id="postText"></textarea>
<button onclick="addPost()">Speichern</button>
<div id="feed"></div>
</div>

<button class="danger" onclick="resetAll()">âš ï¸ RESET</button>
</div>

<p class="footer">GYM-SPARTA Â· OFFLINE Â· MASTER BUILD ğŸ›ï¸</p>

<script>
const MASTER_CODE="SPARTA-ELITE";
const DEVICE_ID_KEY="sparta_device";

let xp=+localStorage.getItem("xp")||0;
let streak=+localStorage.getItem("streak")||0;
let posts=JSON.parse(localStorage.getItem("feed"))||[];
let badges=JSON.parse(localStorage.getItem("badges"))||[];
let xpHistory=JSON.parse(localStorage.getItem("xpHistory"))||[];
let systemHistory=JSON.parse(localStorage.getItem("systemHistory"))||[];
let lastAction=localStorage.getItem("lastAction")||"â€“";
let lastDay=localStorage.getItem("lastDay")||"â€“";
let weekDays=JSON.parse(localStorage.getItem("weekDays"))||[0,0,0,0,0,0,0];
let monthDays=JSON.parse(localStorage.getItem("monthDays"))||{};
let beastDay=+localStorage.getItem("beastDay")||0;

function deviceID(){
if(!localStorage.getItem(DEVICE_ID_KEY))
localStorage.setItem(DEVICE_ID_KEY,Math.random().toString(36));
return localStorage.getItem(DEVICE_ID_KEY);
}

function unlock(){
if(accessCode.value!==MASTER_CODE) return alert("Falscher Code");
localStorage.setItem("sparta_access",deviceID());
localStorage.setItem("sparta_name",spartaName.value);
start();
}

function start(){
if(localStorage.getItem("sparta_access")!==deviceID()){
deviceStatus.textContent="BLOCKIERT";
deviceStatus.className="status-bad";
return;
}
accessBox.classList.add("hidden");
app.classList.remove("hidden");
welcome.textContent="Willkommen "+localStorage.getItem("sparta_name");
dailyCheck();
renderAll();
}

function dailyCheck(){
const today=new Date().toLocaleDateString();
if(lastDay!==today){
streak++;
logSystem("Neuer Tag Â· Streak erhÃ¶ht");
lastDay=today;
localStorage.setItem("lastDay",today);
localStorage.setItem("streak",streak);
}
}

function logXP(amount,reason){
xp+=amount;
xpHistory.unshift(new Date().toLocaleString()+" Â· "+reason+" ("+amount+" XP)");
localStorage.setItem("xpHistory",JSON.stringify(xpHistory));
lastAction=reason;
localStorage.setItem("lastAction",reason);
}

function logSystem(text){
systemHistory.unshift(new Date().toLocaleString()+" Â· "+text);
localStorage.setItem("systemHistory",JSON.stringify(systemHistory));
}

function addPost(){
if(!postText.value) return;
posts.unshift("ğŸ—¡ï¸ "+postText.value+" ("+new Date().toLocaleTimeString()+")");
logXP(5,"Logbuch");
logSystem("Logbuch-Eintrag");
postText.value="";
save();
}

function savePlan(){
localStorage.setItem("activePlan",planSelect.value);
logSystem("Trainingsplan gesetzt");
renderAll();
}

function saveFood(){
localStorage.setItem("activeFood",foodSelect.value);
logSystem("ErnÃ¤hrung gesetzt");
renderAll();
}

function startBeast(){
if(beastDay>0) return;
beastDay=1;
localStorage.setItem("beastDay",beastDay);
logSystem("Beast Mode gestartet");
renderAll();
}

function completeBeastDay(){
if(!(bmTrain.checked&&bmFood.checked&&bmSleep.checked)) return alert("Alles abhaken!");
logXP(25,"Beast Tag "+beastDay);
beastDay++;
localStorage.setItem("beastDay",beastDay);
bmTrain.checked=bmFood.checked=bmSleep.checked=false;
renderAll();
}

function renderWeek(){
week.innerHTML="";
["Mo","Di","Mi","Do","Fr","Sa","So"].forEach((d,i)=>{
let el=document.createElement("div");
el.className="day"+(weekDays[i]?" done":"");
el.textContent=d;
el.onclick=()=>{
weekDays[i]=weekDays[i]?0:1;
logXP(10,"Training "+d);
localStorage.setItem("weekDays",JSON.stringify(weekDays));
renderAll();
};
week.appendChild(el);
});
}

function renderMonth(){
month.innerHTML="";
let now=new Date();
let days=new Date(now.getFullYear(),now.getMonth()+1,0).getDate();
for(let i=1;i<=days;i++){
let key=now.getFullYear()+"-"+now.getMonth()+"-"+i;
let el=document.createElement("div");
el.className="day"+(monthDays[key]?" done":"");
el.textContent=i;
el.onclick=()=>{
monthDays[key]=!monthDays[key];
localStorage.setItem("monthDays",JSON.stringify(monthDays));
logXP(5,"Check-in Tag "+i);
renderAll();
};
month.appendChild(el);
}
}

function checkBadges(){
if(xp>=500&&!badges.includes("Krieger")) badges.push("Krieger");
if(streak>=7&&!badges.includes("Blutwoche")) badges.push("Blutwoche");
if(beastDay>=30&&!badges.includes("Beast")) badges.push("Beast");
localStorage.setItem("badges",JSON.stringify(badges));
}

function renderAll(){
level.textContent=Math.floor(xp/100)+1;
document.getElementById("xp").textContent=xp;
streakSpan.textContent=streak;
lastActionSpan.textContent=lastAction;
activePlan.textContent=localStorage.getItem("activePlan")||"â€“";
activeFood.textContent=localStorage.getItem("activeFood")||"â€“";
lastDaySpan.textContent=lastDay;
beastStatus.textContent=beastDay>0?"Tag "+beastDay+"/30":"Nicht aktiv";
beastBox.classList.toggle("hidden",beastDay===0);
renderWeek();
renderMonth();
renderFeed();
renderBadges();
renderXPLog();
renderSystemLog();
}

function renderFeed(){feed.innerHTML="";posts.forEach(p=>{let d=document.createElement("div");d.textContent=p;feed.appendChild(d);});}
function renderBadges(){badgesBox.innerHTML="";badges.forEach(b=>{let d=document.createElement("div");d.textContent=b;badgesBox.appendChild(d);});}
function renderXPLog(){xpLog.innerHTML="";xpHistory.forEach(x=>{let d=document.createElement("div");d.textContent=x;xpLog.appendChild(d);});}
function renderSystemLog(){systemLog.innerHTML="";systemHistory.forEach(s=>{let d=document.createElement("div");d.textContent=s;systemLog.appendChild(d);});}

function save(){
localStorage.setItem("xp",xp);
localStorage.setItem("feed",JSON.stringify(posts));
checkBadges();
renderAll();
}

function resetAll(){
if(confirm("ALLES LÃ–SCHEN?")){
localStorage.clear();
location.reload();
}
}

if(localStorage.getItem("sparta_access")===deviceID()) start();
else accessBox.classList.remove("hidden");
</script>

</body>
</html>
